<!DOCTYPE html>
<html>
<head>
    <title>To-Do App</title>
    <link rel="stylesheet" href="{% static 'todo/style.css' %}">
</head>
<body>
    <h1>To-Do List</h1>
    <input type="text" id="taskInput" placeholder="Enter task" />
    <button onclick="addTask()">Add Task</button>

    <ul id="taskList"></ul>

    <script>
        const apiURL = '/api/tasks/';

        function loadTasks() {
            fetch(apiURL)
                .then(response => response.json())
                .then(data => {
                    const list = document.getElementById('taskList');
                    list.innerHTML = '';
                    data.forEach(task => {
                        list.innerHTML += `<li>
                            ${task.title} - ${task.completed ? '✔️' : '❌'}
                            <button onclick="deleteTask(${task.id})">Delete</button>
                        </li>`;
                    });
                });
        }

        function addTask() {
            const title = document.getElementById('taskInput').value;
            fetch(apiURL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ title, completed: false })
            })
            .then(() => {
                document.getElementById('taskInput').value = '';
                loadTasks();
            });
        }

        function deleteTask(id) {
            fetch(apiURL + id + '/', { method: 'DELETE' })
                .then(() => loadTasks());
        }

        loadTasks();
    </script>
</body>
</html>
